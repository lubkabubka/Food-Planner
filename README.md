# Планировщик раскладки продуктов для похода 

Этот проект помогает разложить продукты по людям так, чтобы:
- нагрузка была **равномерной и пропорциональной "силе"** участника;
- продукты **уходили по дням** у каждого +- равномерно (не всё в первый день у одного);
- **специи по возможности нес один человек**;
- на выходе получилась таблица как в примере: на каждого человека два столбца *Еда* и *Вес*, с днём в скобках.

## Быстрый старт

1. Установите Python 3.10+ и откройте папку проекта в PyCharm.
2. Создайте и активируйте виртуальное окружение (PyCharm предложит автоматически).
3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
4. Экспортируйте ваши Google‑таблицы в CSV:
   - `participants.csv` — список участников и их сила.
   - `items.csv` — список продуктов с массой, объёмом и днём потребления.
   - (необязательно) `menu.csv` — контрольное меню по дням.
   Положите файлы в папку `data/` (можно поверх шаблонов).
5. Запустите скрипт:
   ```bash
   python src/assign.py
   ```
6. Результаты смотрите в `output/`:
   - `assignments_long.csv` — длинный формат (по строке на продукт).
   - `assignments_wide.csv` — формат для печати/копирования в Google Sheets (по 2 колонки на человека: *Еда*, *Вес*).

## Что за файлы в `data/`

- `participants.csv` — колонки: `name,strength`
- `items.csv` — колонки: `item,weight_kg,volume,day,category`
  - `volume`: small | medium | large
  - `day`: номер дня как целое число (01, 02, 03 …)
  - `category`: regular | spice (специи пометьте `spice`)
- `config.yaml` — простые настройки алгоритма (например, кто несёт специи).

## Как это работает (очень кратко)

1. Считаем общий вес и целевой вес на каждого:  
   `target_i = total_weight * strength_i / sum(strength)`
2. Сортируем продукты по **дню (возрастание)** и **весу (по убыванию)**.
3. Кладём каждый продукт тому, у кого минимальная «стоимость» с учётом:
   - текущего отклонения от цели по весу;
   - равномерности дней у этого человека;
   - штрафа за большой объём (для слабых участников);
   - бонуса, если это специя и выбран «носитель специй».
4. Сохраняем два файла результатов.
